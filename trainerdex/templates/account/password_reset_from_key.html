{% extends "account/base.html" %}

{% load i18n %}
{% load widget_tweaks %}

{% block head_title %}{% trans "Change Password" %}{% endblock %}
{% block section_title %}{% trans "Change Password" %}{% endblock %}

{% block content %}
<div>
  <div>
    <h2>{% if token_fail %}{% trans "Bad Token" %}{% else %}{% trans "Change Password" %}{% endif %}</h2>
  </div>
  {% if token_fail %}
  <div>
      {% url 'account_reset_password' as passwd_reset_url %}
      {% blocktrans %}The password reset link was invalid, possibly because it has already been used.{% endblocktrans %}
  </div>
  <div>
    <a href="{{ passwd_reset_url }}">
      {% trans 'New password reset key' %}
    </a>
  </div>
  {% else %}
    {% if form %}
      <form method="POST" action="{{ action_url }}">
        <div>
          <div id="form_password_reset">
            {% csrf_token %}
            {% render_field form.password1 %}<br>
            {% render_field form.password2 %}
          </div>
        </div>
        <div>
          <input type="submit" name="action" value="{% trans 'change password' %}"/>
        </div>
      </form>
    {% else %}
      <div>
        {% trans 'Your password has now been changed.' %}
      </div>
      <div>
        <a href="{% url 'account_login' %}">
          {% trans 'Return to login page' %}
        </a>
      </div>
    {% endif %}
  {% endif %}
</div>
{% endblock %}
